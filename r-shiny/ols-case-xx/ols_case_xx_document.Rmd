---
output: html_document
runtime: shiny
---

<style>

body{
  font-family: Helvetica;
  font-size: 16pt;
}

</style>

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

<hr>

# Linear Regression Model

<hr>

## Motivation

Understand the effect of different features of the data generating process (DGP) on the sampling distribution of the slope coefficient of a linear regression model.

E.g., change the number of observations $N$ to see the effect of the sample size $N$ on the properties of the OLS estimator for the slope coefficient $\beta_1$ of the linear regression model.

<hr>

## Regression Model


The data are generated by the following model
                                      
\begin{align}
Y_{i} &= \beta_{0} + \beta_{1} X_{1i} + \beta_{2} X_{2i} + u_{i} \\
Y_{i} - \beta_{1} X_{1i} &= \beta_{0} + \beta_{1} X_{1i} + u_{i} \\
Y_{i}^{X_{2i}} &= \beta_{0} + \beta_{1} X_{1i} + u_{i}
\end{align}
                                        
where $X_{2i}$ is an omitted or unobserved variable and where $Y_{i}^{X_{2i}}$ is $Y_{i}$ without the effect of the omitted or unobservable variable.
                                        
Note, neither $X_{2i}$ and thus, nor, $Y_{i}^{X_{2i}}$ are observable to the econometrician.
                                        
<hr>
                                        
The green dots are generated by the 'true' but 'not observable' relationship between $Y_{i}$ and $X_{1i}$, i.e., with controlling for $X_{2i}$. <br>
                                        
The red dots are generatey by the 'potentially false' but 'observable' relationship between $Y_{i}$ and $X_{1i}$, i.e., without controlling for $X_{2i}$. <br>
                                        
<hr>
                                        
The green line is the fitted regression line to the green dots and represents the 'true' but 'not observable' relationship between $Y_{i}$ and $X_{1i}$, i.e., with controlling for $X_{2i}$. <br>
                                        
The red line is the fitted regression line to the red dots and represents 'potentially false' but 'observable' relationship between $Y_{i}$ and $X_{1i}$, i.e., without controlling for $X_{2i}$. <br>

<hr>

The scatterplots shows the unobservable residuals $u_{i}$ (of the model above) of the regression of $Y_{i}$ on $X_{1i}$ without controlling for the unobserved effect of $X_{2i}$. <br>
                                      
This is the difference between the observable red dots and the potentially unobservable 'true' green regression line. <br>
                                      
<hr>

WHAT ABOUT THIS?!

We are interested in the sampling properties of the OLS estimator for the slope coefficient $\beta_1$ of the following linear regression model

\begin{align}
Y_i &= \beta_0 + \beta_1 X_i + u_i, \\
X_{1i} &\sim U_{\left[a_{X_1}, b_{X_1}\right]}, \\
u_i &\sim N\left(0, \sigma_u\right).
\end{align}

<!-- X_i &\sim N\left(0, \sigma_X\right), \\ -->

<hr>

## Features

Overall:

* Sample size $N$
* Spread of $X_{1}$, i.e., $b_{X_1} - a_{X_1}$
* Spread of $u$, i.e., $\sigma_{u}$

Violations of the LS assumptions for causal inference:

\begin{align}
\text{true:} \;\;\; Y_{1i} &= \beta_{0} + \beta_{1} X_{1i} + \beta_{2} X_{2i} + u_{X_1 i} + u_{i}, \\
\text{observed:} \;\;\; Y_{2i} &= \beta_{0} + \beta_1 X_{1i} + u_{i}^{*}, \\
\text{with:} \;\;\; u_{i}^{*} &= \beta_{2} X_{2i} + u_{x_1 i} + u_{i}.
\end{align}

Error-in-variable problem:

\begin{align}
u_{X_1 i} &= m_{u X_1} X_{1i} \\
m_{u X_1} &= \rho_{u X_1} \frac{\sigma_{X_1}}{\sigma_{u}}
\end{align}

* $\rho_{u X_1} \neq 0$
* Note, this is what can be found in S&W, 2020, p. 214

Omitted variable problem:

\begin{align}
X_{2i} &= m_{X_2 X_1} X_{1i} \\
m_{X_2 X_1} &= \rho_{X_2 X_1} \frac{\sigma_{X_1}}{\sigma_{X_2}}
\end{align}

* $\beta_{2} \neq 0$
* $\rho_{X_2 X_1} \neq 0$

Heteroskedastic Regression:

\begin{align}
u_{i} &\sim N\left(0, \sigma^{2}_{i}\right) \\
\sigma^{2}_{i} &= \text{exp}\left(\gamma_0 + \gamma_1 X_{1i}\right)
\end{align}

Instrumental variable regression



<hr>

```{r tabsets, echo=FALSE}
shinyAppDir(
  "ols-case-xx-app",
  options = list(
    width = "100%", height = 700
  )
)
```

<hr>

## Interpretation

* ...
