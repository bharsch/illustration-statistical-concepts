\documentclass{article}

% Language setting
% Replace `english' with e.g. `spanish' to change the document language
\usepackage[english]{babel}

% Set page size and margins
% Replace `letterpaper' with `a4paper' for UK/EU standard size
\usepackage[letterpaper,top=2cm,bottom=2cm,left=3cm,right=3cm,marginparwidth=1.75cm]{geometry}

% Useful packages
\usepackage{amsmath}
\usepackage{graphicx}
\usepackage[colorlinks=true, allcolors=blue]{hyperref}

\usepackage{float}
% See: https://en.wikibooks.org/wiki/LaTeX/Floats,_Figures_and_Captions#Custom_floats (-> Custom floats)
\floatstyle{plaintop}
\newfloat{CodeSnippet}{!hp}{lop}
\floatname{CodeSnippet}{Code Snippet}

\usepackage{fancyvrb}

\title{Interactive Illustration of \\ the Sampling Properties of \\ Estimators}
\author{Markus M\"o\ss ler}

\begin{document}
	
\maketitle
	
\begin{abstract}
This is the documentation of the implementation of a learning module for an interactive illustration of the sampling properties of estimators
\end{abstract}

\section{Introduction}

This repository contains the implementation of a learning module with interactive and animated illustrations of fundamental statistical concepts and properties.

\section{Goal of the learning module (Why?)}

% dgp and sampling distribution
Understanding the concept and properties of sampling distributions of estimators is one of the most important concepts of statistical inference, i.e, of learning from data about the underlying data generating process (DGP) formalized in probabilistic (population) model of interest, and thus, a fundamental part of empirical studies in social science in general and econometrics in particular. 
%
Practice, however, has shown that students often have difficulty understanding the concept of sampling distributions and their properties. 
%
One potential reason for this is that the sampling properties of estimators are often formulated and analyzed in an abstract way only. 
%
The goal of this learning module is to give a more intuitive understanding of the sampling properties of estimators using interactive and animated illustrations of simulation results. 

% example
One example is to understand the effect of increasing the sample size $n$ on the sampling properties of the sample average $\overline{X}$ as an estimator for the mean $\mu$ of a random variable of interest as stated in the law of large numbers (LLN) and the central limit theorem (CLT). 
%
Using interactive illustrations of simulation results the students can increase the sample size and observe how the sample average gets closer to the mean (LLN) and how the sampling distribution of the standardized statistic of the sample average gets closer to the standard normal distribution (CLT). 

% vs. lecture, textbook and chatgpt
The topics, i.e. the sample distribution of estimators, is part of every statistics and econometrics course and can be found in any introductory textbook for this field. 
%
However, by using interactive and animated illustrations the results we aim to provide a deeper and more intuitive understanding of these concepts. 
%
We believe that this kind of understanding is hard to achieve by just attending a \emph{lecture}, reading a \emph{textbook}, or, by chatting with \emph{ChatGPT} about this topic. 
%
Certainly, another way to achieve this is to provide the implementation of the simulation studies or to let the students to implement the simulation studies themselves. 
%
However, this is often too big a hurdle, especially for undergraduate students. 

\section{Subject of the learning module (What?)}

\subsection{General}

Subject of this learning module are the sampling properties of estimators for different data generating processes (DGPs). 
%
The DGPs are based on a statistical model with a particular parameter of interest, e.g., the mean of a Bernoulli random variable. 
%
The parameter(s) of interest of the DGPs are estimated using a particular estimator, e.g., the sample average. 
%
This learning module shows the effect of changes in the DGP, e.g., increasing the sample size $n$, on the sampling distribution of an estimator. 

Note, the interactive illustration of the sampling properties of the sample average for increasing the sample size $n$, i.e., the large sample properties of the sample mean, is only one subject of interest. 
%
Other subjects are to understand the effect of omitted variable bias (OVB) and heteroskedasticity on the sampling distribution of the OLS estimator in a simple linear regression model.

\subsection{Univariate random variables and sample average}

\subsubsection{Bernoulli distribution and sample average}

% ber_dis_sam_ave

This illustration shows the effect of changing the sample size $n$ and the probability of success $p$ of the Bernoulli distribution on the sampling distribution of the sample average as estimator for mean of the Bernoulli distribution.

\subsubsection{Continuous uniform distribution and sample average}

% con_und_dis_sam_ave

This illustration shows the effect of changing the sample size $n$ and the lower bound $a$ and the upper bound $b$ of the continuous uniform distribution on the sampling distribution of the sample average as estimator for mean of the continuous uniform distribution.

\subsection{Cross Section Linear Regression Model and Ordinary Least Squares}

Illustration of the properties of the OLS estimator to estimate the slope coefficient $\beta_{1}$ of a linear regression model, i.e.,

\begin{align}
	Y_{i} = \beta_{0} + \beta_{1} X_{i} + u_{i}
\end{align}

\subsubsection{Sampling distribution and sample size}

% cs_lin_reg_ols_01

This illustration shows the effect of increasing the sample size $n$ on the sampling distribution of the OLS estimator for the slope coefficient of a simple linear regression model.

\subsubsection{Sample Size and parameterization of the DGP}

% cs_lin_reg_ols_02

This illustration shows the effect of changing the parameters of the DFP, i.e.,  

\begin{itemize}
	\item[1.] changing the sample size $n$,
	\item[2.] changing the variance of $u_{i}$, i.e., $\sigma_{u_{i}}^{2}$, and,
	\item[3.] changing the variance of $X_{i}$, i.e., $\sigma_{X}^{2}$, 
\end{itemize}

on the sampling distribution of the OLS estimator for the slope coefficient of a simple linear regression model.

\subsubsection{Effect of Heteroskedasticity}

% cs_lin_reg_ols_03

\subsubsection{Effect of Omitted Variable Bias}

% cs_lin_reg_ols_04





\section{Method/implementation of the learning module (How?)}

\subsection{General approach}

For an interactive and immediate user experience it is useful to separate the simulation study and the interactive presentation of the results. 
%
This two-step procedure allows also a flexible implementation, i.e., the simulation studies can be conducted with any suitable software, e.g., \emph{R}, \emph{python}, etc. and the results can be presented interactively using basic web development languages, i.e., \emph{html}, \emph{css} and \emph{javascript}.

\emph{Simulation study and illustration/reporting of the results:}

\begin{itemize}
	\item A realization of the DGP is simulated and the values of a given estimator is calculated.
	\item This procedure is repeated $10,000$ times. 
	\item The simulation results, i.e., the sampling distribution of the estimator, are illustrated using  barplots, scatterplots and/or histograms.
	\item Other simulation results can be reported using tables.
	\item The simulation study is performed for different specifications of the statistical model or for different estimators.
	\item For each specification or estimator the results, e.g., figures and/or tables are saved in different \texttt{.svg} and/or \texttt{html} files.
	\item The simulation study is performed using the programming language for statistical computing and graphics \href{https://www.r-project.org/}{\emph{R}}.	
\end{itemize}

\emph{Interactive presentation of the simulation results:}

\begin{itemize}
	\item The results for different specifications, e.g., figures and/or tables, are interactively embedded in a \texttt{.html} file and linked to a slider input.
	\item The effect of different specifications can be studied by changing the slider, i.e., the specification, and thus, the embedded results.
	\item The interactive integration of the illustrations into the \texttt{.html} file is based on javascript.
\end{itemize}

\emph{Additional material, e.g., for explanation purposes:}

\begin{itemize}
	\item Verbal text or mathematical formula inserted in the \texttt{.html} file directly or using ``collapsibles''.
	\item Interactive animation of changes in the slider inputs with audio explanations.
	\begin{itemize}
		\item For each figure one explanation for the figure is added
		\item For each slider and figure one animated explanation can be added
	\end{itemize}	
	\item Any additional material, e.g., video explanations, can be added into the \texttt{html} file interactively or non-interactively.
\end{itemize}

\subsection{Flexible presentation using \emph{html}}

The content of each learning module is presented using \emph{html}, the most popular language to build web pages.\footnote{An introduction to the most important web page development languages can be found here: \href{https://www.w3schools.com/}{\texttt{https://www.w3schools.com/}}} 
%
This allows a very flexible presentation of the results. 
%
The styling of the learning module is based on \emph{css}, a popular language for styling web pages, and on \emph{bootstrap}, a popular \emph{css} framework. 
%
The interactive and animated feature of the learning module is based on \emph{javascript}, a popular language for programming web pages. 
%
The \emph{bootstrap} framework with its grid system allows the development of responsive, mobile-first websites with an appealing design. 
%
This enables an appealing experience of the learning also on mobile devices.



\subsection{Interactive user experience using \emph{javascript}}

The following explanations are based on the illustration of the properties of the sample average as estimator for the mean of a Bernoulli random variable, i.e., based on module \texttt{ber-dis-sam-ave}. 
%
The values of the parameters can be changed using \emph{bootstrap-slider} inputs\footnote{See: \href{https://github.com/seiyria/bootstrap-slider}{\texttt{https://github.com/seiyria/bootstrap-slider}}}.
%
For example for the input of the sample size the following \emph{html} code snippet is used. 

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Html} code snippet for \emph{bootstrap-slider} input}
	\tiny
	\vspace{0.25cm}
	\begin{BVerbatim}
		
		<p style='font-size: 12pt; text-align: center;'>Sample size \(n\)</p><p style='font-size: 12pt; text-align: center' id="sliderValue01Id"></p>
		<input id="slider01Id" type="text" data-slider-min="0" data-slider-max="4" data-slider-step="1" data-slider-value="2"/>
		
	\end{BVerbatim}
	\label{HtmlCodSniBsInput}
\end{CodeSnippet}

Changing the slider input values invokes \emph{javascript} function. 

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Javascript} code snippet for interactive sliders (no 1): Initialize slider values}
	\normalsize
	\vspace{0.25cm}
	\begin{BVerbatim}
		
		var nVec = [5, 10, 25, 50, 100]
		
		// set initial value for slider 1
		document.getElementById("sliderValue01Id").innerHTML = "\\(n = " + nVec[2] + "\\)";
		var element = document.getElementById("sliderValue01Id");
		MathJax.typeset([element]);
		
	\end{BVerbatim}
	\label{JsCodSniSliInt01}
\end{CodeSnippet}

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Javascript} code snippet for interactive sliders (no 2): Update slider values}
	\normalsize
	\vspace{0.25cm}
	\begin{BVerbatim}
						
		var slider01 = new Slider("#slider01Id", { 
			tooltip: "never",
			formatter: function(value) {
				return nVec[value]
			} 
		});
		
	\end{BVerbatim}
	\label{JsCodSniSliInt02}
\end{CodeSnippet}

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Javascript} code snippet for interactive sliders (no 3): Change illustration}
	\tiny
	\vspace{0.25cm}
	\begin{BVerbatim}
		
		slider01.on("slide", function() {
			
			var sliderValue01 = slider01.getValue() + 1;
			var sliderValue02 = slider02.getValue() + 1;
			
			document.getElementById("imageL1N1Id").setAttribute("src", "./figures/figure_01_" + sliderValue01 + "_" + sliderValue02 + ".svg");
			document.getElementById("imageL1N2Id").setAttribute("src", "./figures/figure_02_" + sliderValue01 + "_" + sliderValue02 + ".svg");
			document.getElementById("imageL1N3Id").setAttribute("src", "./figures/figure_03_" + sliderValue01 + "_" + sliderValue02 + ".svg");
			
			document.getElementById("sliderValue01Id").innerHTML = "\\(n = " + nVec[slider01.getValue()] + "\\)";
			var element = document.getElementById("sliderValue01Id");
			MathJax.typeset([element]);
			
		})
		
	\end{BVerbatim}
	\label{JsCodSniSliInt03}
\end{CodeSnippet}

 





The interactive experience of the illustrations is based on three \emph{javascript} function which are linked to the sliders of the parameters. 
%
There is a 



\subsection{Explained and animated user experience using \emph{javascript}}

The following explanations are based on the illustration of the properties of the sample average as estimator for the mean of a Bernoulli random variable, i.e., based on module \texttt{ber-dis-sam-ave}. 
%
The explanation of the figure is based on a simple \emph{javascript} function \texttt{explainButto01Click}.

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Javascript} snippet for explanation}
%	\scriptsize
\vspace{0.25cm}
	\begin{BVerbatim}

explainButto01Click = function(audioId) {
	var audio = document.getElementById(audioId);
	audio.play();
}

	\end{BVerbatim}
	\vspace*{-2mm}
	\label{JsCodSniExp}
\end{CodeSnippet}

The explained animation of the parameters is based on the \emph{javascipt} function \texttt{sliderLoop()} and the functions \texttt{animateButto01Click()} and \texttt{animateButto02Click()}. 
%
Note, for each parameter a function \texttt{animateButtoXXClick()} is used, i.e., for the module \texttt{ber-dis-sam-ave} there are two functions, \texttt{animateButto01Click} and \texttt{animateButto02Click}. 
%
%Thus, the number of functions \texttt{animateButtoXXClick} depends on the number of parameters used in the module. 
%
Furthermore, the body of both functions, \texttt{sliderLoop()} and \texttt{animateButtoXXClick()} depends on the number of figures (for \texttt{ber-dis-sam-ave} equals three) and the number of parameters (for \texttt{ber-dis-sam-ave} equals two) used in the module.

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Javascript} snippet for explanation and animation (part I)}
	%	\scriptsize
\vspace{0.25cm}	
	\begin{BVerbatim}
		
function sliderLoop(loopSliderValue01, loopSliderValue02) {
	
	var sliderValue01 = loopSliderValue01 + 1;
	var sliderValue02 = loopSliderValue02 + 1;
	
	document.getElementById("imageL1N1Id").setAttribute("src", "./figures/figure_01_" + sliderValue01 + "_" + sliderValue02 + ".svg");
	document.getElementById("imageL1N2Id").setAttribute("src", "./figures/figure_02_" + sliderValue01 + "_" + sliderValue02 + ".svg");
	document.getElementById("imageL1N3Id").setAttribute("src", "./figures/figure_03_" + sliderValue01 + "_" + sliderValue02 + ".svg");
	
	document.getElementById("sliderValue01Id").innerHTML = "\\(n = " + nVec[slider01.getValue()] + "\\)";
	var element = document.getElementById("sliderValue01Id");
	MathJax.typeset([element]);
	
	document.getElementById("sliderValue02Id").innerHTML = "\\(p = " + pVec[slider02.getValue()] + "\\)";
	var element = document.getElementById("sliderValue02Id");
	MathJax.typeset([element]);
	
	var slider = document.getElementById("slider01Id");
	slider.value = sliderValue01;
	
	var slider = document.getElementById("slider02Id");
	slider.value = sliderValue02;
	
};
		
	\end{BVerbatim}
	\vspace*{-2mm}
	\label{JsCodSniAn01}
\end{CodeSnippet}

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Javascript} snippet for explanation and animation (part II)}
	%	\scriptsize
\vspace{0.25cm}	
	\begin{BVerbatim}
		
animateButto01Click = function(org, start, stop, audioId) {
	var audio = document.getElementById(audioId);
	audio.play();
	var ind = start;
	var loopSliderValue02 = slider02.getValue();
	var outerInterval = setInterval(function() {
		var loopSliderValue01 = ind;
		slider01.setValue(ind);
		sliderLoop(loopSliderValue01, loopSliderValue02);
		ind++;
		if (ind > stop) {
			var innerInterval = setInterval(function() {
				slider01.setValue(ind);
				slider01.setValue(org);
				sliderLoop(org, loopSliderValue02);
				clearInterval(innerInterval);
			}, 1000);
			clearInterval(outerInterval);
		}
	}, 1000);
}
		
	\end{BVerbatim}
	\vspace*{-2mm}
	\label{JsCodSniAn02}
\end{CodeSnippet}

\begin{CodeSnippet}[!hp]
	\centering
	\caption{\emph{Javascript} snippet for explanation and animation (part III)}
	%	\scriptsize
	\vspace{0.25cm}	
	\begin{BVerbatim}
		
animateButto02Click = function(org, start, stop, audioId) {    
	var audio = document.getElementById(audioId);
	audio.play();
	var ind = start;
	var loopSliderValue01 = slider01.getValue();
	var outerInterval = setInterval(function() {
		var loopSliderValue02 = ind;
		slider02.setValue(ind);
		sliderLoop(loopSliderValue01, loopSliderValue02);
		ind++;
		if (ind > stop) {
			var innerInterval = setInterval(function() {
				slider02.setValue(ind);
				slider02.setValue(org);            
				sliderLoop(loopSliderValue01, org);
				clearInterval(innerInterval);
			}, 1000);        
			clearInterval(outerInterval);
		}
	}, 1000);
}
		
	\end{BVerbatim}
	\vspace*{-2mm}
	\label{JsCodSniAn03}
\end{CodeSnippet}

\subsection{Integration in the lecture}

\begin{itemize}
	\item The material of this learning module can be provided on a gradual basis using links to the specific illustrations/sub modules or as a complete course/module with a starting page and links to the sub modules.
	\item The material can be hosted on \emph{GitHub} or on a learning platform such as \emph{ILIAS}. The easiest way to host the material on a learning platform such as \emph{ILIAS} is using a import interface for \texttt{.html} structures. In the case of the learning platform \emph{ILIAS} this procedure is quite easy and flexible.	
\end{itemize}

\subsection{Structure of the learning module}

\begin{itemize}
	\item The learning module contains different sub modules where each sub module has a specific learning goal, e.g., ``understand the effect of the sample size on the sample properties of the sample average to estimate the mean of a Bernoulli distribution''.
	\item The material of a sub module is collected in a sub folder, e.g., \texttt{ber-dis-sam-ave}.
	\item The sub folder contains:
	\begin{itemize}
		\item \texttt{.R} file, e.g., \texttt{ber\_dis\_sam\_ave.R}, with the simulation study and the results stored in the \texttt{figures} and/or \texttt{tables} subdirectory
		\item \texttt{figures} subdirectory with the illustrations of the simulation results
		\item \texttt{audios} subdirectory with the audio text and files for the explanations using interactive animations
		\item \texttt{tables} subdirectory with the reports of the simulation results (optional)
		\item \texttt{.html} file, e.g., \texttt{ber\_dis\_sam\_ave.html}, with the interactive representation of the illustrations
		\item \texttt{myScript.js} with the javascript for the interactive illustrations
		\item \texttt{myStyle.css} with the css styles for the interactive illustrations
		\item Additional assets, e.g.,:
		\begin{itemize}
			\item \texttt{.png} file with a logo for the header of the \texttt{.html} file
			\item ...
		\end{itemize}
	\end{itemize}
\end{itemize}

\subsection{Structure of the \texttt{.html} file}

The content is divided across four bootstrap containers:

\begin{itemize}
	\item 1st Container: Header of the module
	\item 2nd Container with three sections
	\begin{itemize}
		\item Topic of the module
		\item Data generating process (DGP)
		\item Estimator and parameter of interest
	\end{itemize}
	\item 3rd Container:
	\begin{itemize}
		\item Parameter panel with the slider to change the parameter of interest
		\item Illustration panel with four tabs for the illustration of
		\begin{itemize}
			\item Sample draw: Particular outcome
			\item Residual: Particular diagnostic
			\item Estimates: Histogram of parameter estimates
			\item Std. Estimates: Histogram of standardized parameter etimates
		\end{itemize}
	\end{itemize}
	\item 4th Container: More Details
	\begin{itemize}
		\item Simulation Exercise: 
	\end{itemize}
	
\end{itemize}



\bibliographystyle{alpha}
\bibliography{bibliography}
	
\end{document}